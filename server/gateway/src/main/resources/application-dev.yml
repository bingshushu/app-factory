# 开发环境配置
server:
  port: 8080

spring:
  application:
    name: gateway

  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}

  cloud:
    gateway:
      routes:
        # User Service - 认证
        - id: user-service-auth
          uri: ${USER_SERVICE_URL:http://localhost:8081}
          predicates:
            - Path=/api/v1/auth/**
          filters:
            - AddRequestHeader=X-Gateway, app-factory

        # User Service - 用户管理
        - id: user-service-users
          uri: ${USER_SERVICE_URL:http://localhost:8081}
          predicates:
            - Path=/api/v1/users/**,/api/v1/profile/**
          filters:
            - AddRequestHeader=X-Gateway, app-factory

        # WebSocket Service
        - id: ws-service
          uri: ${WS_SERVICE_URL:http://localhost:8082}
          predicates:
            - Path=/api/v1/ws/**,/ws/**

        # File Service
        - id: file-service
          uri: ${FILE_SERVICE_URL:http://localhost:8083}
          predicates:
            - Path=/api/v1/files/**

        # Notification Service
        - id: notification-service
          uri: ${NOTIFICATION_SERVICE_URL:http://localhost:8084}
          predicates:
            - Path=/api/v1/notifications/**

jwt:
  secret: dev-secret-key-for-testing-only-min-256-bits-long-change-in-production

logging:
  level:
    root: INFO
    com.appfactory.gateway: DEBUG
    org.springframework.cloud.gateway: DEBUG
